apiVersion: v1
kind: Service
metadata:
  name: demo-app
  namespace: demo-app
  labels:
    app: demo-app
    # CRITICAL: BGP advertisement labels for Cilium LoadBalancer
    bgp.cilium.io/ip-pool: default
    bgp.cilium.io/advertise-service: default
  annotations:
    # Optional: request specific IP from pool (comment out for automatic allocation)
    io.cilium/lb-ipam-ips: "172.20.10.22"
spec:
  type: LoadBalancer
  selector:
    app: demo-app
  ports:
    - port: 80
      targetPort: 80
      protocol: TCP
      name: http
  sessionAffinity: None
